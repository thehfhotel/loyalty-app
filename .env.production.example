# Production Environment Configuration
# Copy this file to .env.production and fill in your production values

# ===========================================
# DOMAIN AND URL CONFIGURATION
# ===========================================
# Replace 'your-domain.com' with your actual domain configured in Cloudflare
DOMAIN=your-domain.com
FRONTEND_URL=https://your-domain.com
BACKEND_URL=https://your-domain.com/api

# Internal container communication (for Docker containers)
# These should remain as localhost since containers communicate internally
INTERNAL_FRONTEND_URL=http://frontend:3000
INTERNAL_BACKEND_URL=http://backend:4000

# ===========================================
# DATABASE CONFIGURATION
# ===========================================
# Keep these as container names for internal Docker communication
DATABASE_URL=postgresql://loyalty:loyalty_pass@postgres:5432/loyalty_db
REDIS_URL=redis://redis:6379

# ===========================================
# SECURITY SECRETS (CHANGE THESE!)
# ===========================================
# Generate strong random values for production
# Use: openssl rand -base64 32
JWT_SECRET=CHANGE_THIS_TO_STRONG_RANDOM_32_CHAR_STRING
JWT_REFRESH_SECRET=CHANGE_THIS_TO_DIFFERENT_STRONG_32_CHAR_STRING
SESSION_SECRET=CHANGE_THIS_TO_ANOTHER_STRONG_32_CHAR_STRING

# ===========================================
# OAUTH CONFIGURATION
# ===========================================
# Google OAuth (update these in Google Cloud Console)
GOOGLE_CLIENT_ID=your-google-client-id-from-console
GOOGLE_CLIENT_SECRET=your-google-client-secret-from-console
GOOGLE_CALLBACK_URL=https://your-domain.com/api/oauth/google/callback

# Facebook OAuth (update these in Facebook Developer Console)
FACEBOOK_APP_ID=your-facebook-app-id
FACEBOOK_APP_SECRET=your-facebook-app-secret
FACEBOOK_CALLBACK_URL=https://your-domain.com/api/oauth/facebook/callback

# LINE OAuth (update these in LINE Developer Console)
LINE_CHANNEL_ID=your-line-channel-id
LINE_CHANNEL_SECRET=your-line-channel-secret
LINE_CALLBACK_URL=https://your-domain.com/api/oauth/line/callback

# ===========================================
# APPLICATION CONFIGURATION
# ===========================================
NODE_ENV=production

# Port configuration (internal container ports)
BACKEND_PORT=4000
FRONTEND_PORT=4001

# ===========================================
# ADMIN USER CONFIGURATION
# ===========================================
# Change these credentials for production
LOYALTY_USERNAME=your-admin-email@domain.com
LOYALTY_PASSWORD=your-secure-admin-password

# ===========================================
# OPTIONAL: ADDITIONAL PRODUCTION SETTINGS
# ===========================================
# Logging level (error, warn, info, debug)
LOG_LEVEL=info

# CORS origins (comma-separated list)
CORS_ORIGINS=https://your-domain.com

# Rate limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# File upload limits
MAX_FILE_SIZE=5242880
UPLOAD_DIR=/app/storage/uploads

# ===========================================
# CLOUDFLARE CONFIGURATION NOTES
# ===========================================
# When using Cloudflare Zero Trust:
# 1. Configure your tunnel to point to localhost:4001 on your server
# 2. Ensure your domain DNS is set to proxy through Cloudflare
# 3. Update OAuth provider callback URLs to use https://your-domain.com
# 4. Test both frontend access and API calls through the domain